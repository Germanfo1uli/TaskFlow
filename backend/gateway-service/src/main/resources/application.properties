# Server
server.port=8080
spring.application.name=gateway-service

# Eureka
eureka.client.service-url.defaultZone=http://eureka-server:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.prefer-ip-address=true

# Redis
spring.data.redis.host=localhost
spring.data.redis.port=6379

# Gateway settings
gateway.secret.header.name=X-Gateway-Source
gateway.secret.value=${GATEWAY_SECRET:dev-secret-key-change-in-prod}

# CORS
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowed-origin-patterns=*
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowed-methods=*
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allow-credentials=true
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].max-age=3600

# JWT
jwt.secret=your-super-secret-jwt-key-256-bit-minimum!!
jwt.access-token-expiration=900000000
jwt.refresh-token-expiration=604800000

# Routes

# User Service (Auth)
spring.cloud.gateway.server.webflux.routes[0].id=user-service
spring.cloud.gateway.server.webflux.routes[0].uri=lb://user-service  # lb = load balancer
spring.cloud.gateway.server.webflux.routes[0].predicates[0]=Path=/api/auth/**, /api/users/**
user.service.url=http://user-service:8081

# ????????? ????????? (??? JWT)
spring.cloud.gateway.server.webflux.routes[0].filters[0].name=JwtAuthenticationFilter
spring.cloud.gateway.server.webflux.routes[0].filters[0].args.skipPaths[0]=/api/auth/register
spring.cloud.gateway.server.webflux.routes[0].filters[0].args.skipPaths[1]=/api/auth/login
spring.cloud.gateway.server.webflux.routes[0].filters[0].args.skipPaths[2]=/api/auth/refresh
spring.cloud.gateway.server.webflux.routes[0].filters[0].args.skipPaths[3]=/api/swagger-ui/**
spring.cloud.gateway.server.webflux.routes[0].filters[0].args.skipPaths[4]=/api/v3/api-docs/**
spring.cloud.gateway.server.webflux.routes[0].filters[0].args.skipPaths[5]=/api/webjars/**
spring.cloud.gateway.server.webflux.routes[0].filters[0].args.skipPaths[6]=/api/swagger-resources/**

# Board Service
#spring.cloud.gateway.server.webflux.routes[1].id=board-service
#spring.cloud.gateway.server.webflux.routes[1].uri=http://localhost:8082
#spring.cloud.gateway.server.webflux.routes[1].predicates[0]=Path=/api/boards/**, /api/tasks/**
#spring.cloud.gateway.server.webflux.routes[1].filters[0].name=JwtAuthenticationFilter

# .NET Service 1 (??????)
#spring.cloud.gateway.routes[2].id=dotnet-service-1
#spring.cloud.gateway.routes[2].uri=http://localhost:9001
#spring.cloud.gateway.routes[2].predicates[0]=Path=/api/reports/**
#spring.cloud.gateway.routes[2].filters[0]=JwtAuthenticationFilter

# ?????????? ???? ???????
spring.cloud.gateway.server.webflux.routes[0].filters[0].args.skipPaths[7]=/api/auth/blacklist

# Default Filters
spring.cloud.gateway.server.webflux.default-filters[0].name=DedupeResponseHeader
spring.cloud.gateway.server.webflux.default-filters[0].args.name=Access-Control-Allow-Credentials Access-Control-Allow-Origin

# Logging
logging.level.com.example.gateway=DEBUG
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.io.netty=ERROR

# Health check
management.endpoints.web.exposure.include=health,info